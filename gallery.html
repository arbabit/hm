<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery | Haroon Mahmood Welfare Trust</title>
    <link rel="stylesheet" href="style.css">
    <style>
    /* Slideshow: fixed height with object-fit so all slides look consistent */
    /* Broader suppression of mobile tap highlight within the gallery */
    html, body, #featuredSlideshow, .crown-slideshow, .crown-container,
    .crown-main, .crown-thumbs img, .crown-main img, .gallery-grid,
    .prev, .next, button {
        -webkit-tap-highlight-color: transparent;
    }
    .food-slideshow-container {
        position: relative;
        max-width: 760px;
        margin: 12px auto; /* reduced top/bottom space */
        background: #fff;
        padding: 8px; /* tighter padding to reduce white space */
        border-radius: 10px;
        box-shadow: 0 6px 30px rgba(0,0,0,0.06);
        text-align: center;
        overflow: hidden;
        -webkit-tap-highlight-color: transparent; /* suppress highlight within container */
        -webkit-user-select: none; /* prevent selection flash on iOS */
        user-select: none;
        -webkit-touch-callout: none; /* disable touch callout overlay */
    }
    .food-slide {display: none; width:100%;}
    .food-slide.active {display:block;}
    .food-slide img {
        width: 100%;
        height: auto;
        max-height: 52vh; /* smaller to avoid perceived upscaling */
        object-fit: contain; /* do not crop */
        object-position: center center;
        border-radius: 8px;
        display: block;
        margin: 0 auto;
        box-shadow: 0 4px 18px rgba(0,0,0,0.06);
    }
    .gallery-caption {margin-top:8px; color:#333; font-size:15px}
    .prev, .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        padding: 10px 14px;
        transform: translateY(-50%);
        color: #1976a5;
        font-weight: 700;
        font-size: 20px;
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
        user-select: none;
        -webkit-tap-highlight-color: transparent; /* remove blue tap highlight on mobile */
        -webkit-user-select: none;
        -webkit-touch-callout: none;
        outline: none;
        border: none;
        appearance: none;
        touch-action: manipulation;
    }
    .prev:active, .next:active,
    .prev:focus, .next:focus {
        background: #fff; /* keep white background when pressed */
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    }
    .next {right: 12px}
    .prev {left: 12px}

    /* Gallery grid */
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 18px;
        margin-top: 12px; /* tighten spacing above grid */
    }
    .gallery-card {background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 16px rgba(0,0,0,0.04)}
    /* Mid grid thumbnails: force uniform boxes for a unified look */
    .gallery-card img {width:100%;height:250px;object-fit:cover;display:block;transition:transform .28s ease,box-shadow .28s ease}
    .gallery-card:hover img{transform:scale(1.03);box-shadow:0 12px 30px rgba(12,97,142,0.08)}
    .gallery-card{overflow:hidden}
    /* Ensure mid grid uses consistent columns and no gaps */
    #midGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;margin-top:18px}
    .gallery-card .gallery-caption {padding:10px}

    /* Modal */
    .modal{display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,0.75)}
    .modal-content{margin:6% auto;display:block;max-width:920px;width:90%;height:auto;border-radius:8px;max-height:80vh;object-fit:contain}
    .modal-close{position:absolute;right:18px;top:18px;color:#fff;font-size:34px;cursor:pointer}
    @media (max-width:900px){.food-slide img{max-height:46vh;height:auto;object-position:center center}}
    @media (max-width:600px){.food-slide img{max-height:40vh;height:auto;object-position:center center}.gallery-card img{height:140px}}
    /* Alternate (bottom) slideshow style */
    .alt-slideshow-container {text-align:center; background:#fff; padding:14px; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,0.04);}
    .alt-main {max-width:520px;margin:0 auto 12px auto;border-radius:6px;overflow:hidden}
    .alt-main img{width:100%;height:auto;max-height:420px;object-fit:contain;display:block}
    .alt-thumbs{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
    .alt-thumbs img{width:96px;aspect-ratio:16/10;height:auto;object-fit:contain;background:#fff;border-radius:6px;cursor:pointer;opacity:.95;border:1px solid rgba(15,20,25,0.08)}
    .alt-thumbs img.active-thumb{border-color:#1976a5;opacity:1}
    /* Crown-style featured area */
    .crown-slideshow{position:relative;padding:26px 12px 18px;border-radius:12px}
    .crown-container{background:var(--white);padding:18px;border-radius:12px;border:1px solid rgba(15,20,25,0.04)}
    .crown-thumbs{display:flex;gap:6px;justify-content:flex-start;flex-wrap:nowrap;position:relative;z-index:3;margin-bottom:8px;overflow-x:auto;padding-bottom:6px;scroll-snap-type:x proximity;-webkit-overflow-scrolling:touch}
    .crown-thumbs img{width:110px;aspect-ratio:16/10;height:auto;object-fit:contain;background:#fff;border-radius:8px;cursor:pointer;opacity:.9;transform:translateY(0);transition:all .25s;flex:0 0 auto;scroll-snap-align:center;border:1px solid rgba(15,20,25,0.08)}
    .crown-thumbs img.small{width:72px;height:52px;opacity:.7}
    .crown-thumbs img.active-thumb{box-shadow:0 6px 18px rgba(0,0,0,0.08);transform:translateY(-8px);opacity:1;border:3px solid var(--white)}
    .crown-main{display:flex;justify-content:center;align-items:center}
    .crown-main img{width:min(72%, 640px);height:auto;border-radius:12px;box-shadow:0 10px 30px rgba(12,97,142,0.06);object-fit:contain;cursor:zoom-in}
    /* opening/closing headings */
    .gallery-opening{margin:24px 0 6px;text-align:center}
    .gallery-opening .opening-title{font-size:1.5rem;color:var(--blue);margin:0;font-weight:600;font-style:normal}
    .gallery-closing{margin:22px 0 46px;text-align:center}
    .gallery-closing .closing-title{font-size:1rem;color:var(--dark-charcoal);margin:0}

    /* Sign-off card: larger typography + tasteful accent */
    .signoff-card{
        max-width:820px;
        margin:22px auto 30px auto;
        padding:24px 28px;
        border-radius:14px;
        text-align:center;
        background: linear-gradient(#fff,#fff) padding-box,
                    linear-gradient(90deg,#111,#0c618e 35%,#00b3b3 65%,#f7a623) border-box;
        border:2px solid transparent;
        box-shadow:0 18px 48px rgba(12,97,142,0.08);
    }
    .signoff-card h3{
        font-size:clamp(1.8rem, 1.2rem + 1.8vw, 2.4rem);
        margin:0 0 14px 0;
        font-weight:800;
        color:var(--blue);
        letter-spacing:0.3px;
        position:relative;
    }
    .signoff-card h3::after{
        content:"";
        display:block;
        width:220px;
        height:14px;
        margin:10px auto 0;
        background:url('images/brush-underline.svg') center/contain no-repeat;
        opacity:0.9;
    }
    .signoff-card p{
        margin:10px 0 0 0;
        font-size:clamp(1.05rem, 0.95rem + 0.6vw, 1.35rem);
        color:var(--dark-charcoal);
        line-height:1.7;
    }

    @media (max-width:900px){
        .crown-main img{width:min(70%, 380px)}
        .crown-thumbs img{width:72px;height:50px}
    }
    @media (max-width:600px){
        .crown-main img{width:min(86%, 320px)}
        .crown-thumbs{gap:8px}
        .crown-thumbs img{width:56px;height:40px}
    }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <header id="mainHeader"></header>

    <main>
        <section class="hero-sub">
            <div class="container">
                <h1><span class="gold-text">Gallery</span></h1>
                <!--<p>A transparent look into our welfare activities and community impact.</p>-->
            </div>
        </section>

        <!-- (opening heading removed per request) -->

        <section class="section">
            <div class="container">
                <!-- filters removed: showing all images by default -->

                <div class="gallery-grid" id="galleryGrid">
                    <!-- Unified slideshow (all images in images/1) -->
                    <div style="grid-column: 1 / -1;">
                        <div class="food-slideshow-container" id="featuredSlideshow">
                            <!-- slides inserted dynamically -->
                            <button class="prev" type="button" onclick="plusFoodSlides(-1)">&#10094;</button>
                            <button class="next" type="button" onclick="plusFoodSlides(1)">&#10095;</button>
                        </div>
                    </div>
                </div>
                <!-- Sign-off / organization statement -->
                <div class="signoff-card">
                    <h3>Haroon Mahmood Welfare Trust</h3>
                    <p>Serving Humanity with Compassion, Integrity, and Transparency.</p>
                </div>
            </div>
        </section>
    </main>

    <div id="galleryModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImg">
        <div id="modalCaption"></div>
    </div>


    <!-- Footer replaced with footer.html content -->
    <div id="mainFooter"></div>

    <!-- Scripts should be at the end of body -->
    <script src="main.js"></script>
    <script>
    /* Unified image list (all files now in images/1) */
    const allImgs = [
        "images/1/1347931389.jpg","images/1/1380115859.jpg","images/1/1681937538.jpg","images/1/2380709797.jpg","images/1/2389908033.jpg","images/1/2588238156.jpg","images/1/3005944258.jpg","images/1/3028937343.jpg","images/1/3361553760.jpg","images/1/3511566283.jpg","images/1/3578212725.jpg","images/1/3937220898.jpg","images/1/4183791268.jpg","images/1/4195852686.jpg","images/1/428825512.jpg","images/1/736598867.jpg",
        // moved from folder 2
        "images/1/WhatsApp Image 2026-01-13 at 12.32.25 PM.jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.32.23 PM.jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.32.23 PM (1).jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.32.22 PM.jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.10.43 PM.jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.10.43 PM (1).jpeg",
        "images/1/WhatsApp Image 2026-01-13 at 12.10.41 PM.jpeg",
        "images/1/3851579705.jpg","images/1/3751421102.jpg","images/1/3189969113.jpg","images/1/3134267900.jpg","images/1/1797025948.jpg","images/1/1556381711.jpg","images/1/1414026331.jpg",
        // moved from folder 3
        "images/1/1-39.jpg","images/1/1-40.jpg","images/1/1-73.jpg","images/1/2999518530.jpg","images/1/487702632.jpg"
    ];

    // Top slideshow (reuses existing .food-slide styles)
    let foodSlideIndex = 0;
    let foodSlideTimer;

    function buildFeatured(images){
        const container = document.getElementById('featuredSlideshow');
        if(!container) return;
        // build crown structure (thumbs above, big main centered)
        container.innerHTML = '';
        const crownOuter = document.createElement('div'); crownOuter.className = 'crown-container';
        const crown = document.createElement('div'); crown.className = 'crown-slideshow';
        crown.innerHTML = `<div class="crown-thumbs" id="crownThumbs"></div><div class="crown-main" id="crownMain"></div>`;
        crownOuter.appendChild(crown);
        // prev/next controls
        const prev = document.createElement('button'); prev.type = 'button'; prev.className = 'prev'; prev.innerHTML = '&#10094;'; prev.onclick = ()=> plusFoodSlides(-1);
        const next = document.createElement('button'); next.type = 'button'; next.className = 'next'; next.innerHTML = '&#10095;'; next.onclick = ()=> plusFoodSlides(1);
        [prev, next].forEach(el => {
            el.addEventListener('click', ()=> el.blur());
            el.addEventListener('touchend', ()=> el.blur(), {passive:true});
        });
        container.appendChild(prev); container.appendChild(crownOuter); container.appendChild(next);

        const thumbs = crown.querySelector('#crownThumbs');
        const main = crown.querySelector('#crownMain');
        // fill thumbs
        images.forEach((src,i)=>{
            const t = document.createElement('img'); t.src = src; t.loading = 'lazy';
            t.addEventListener('click', ()=> { setCrown(i); });
            if(i>4) t.classList.add('small');
            thumbs.appendChild(t);
        });
        // main image
        const mimg = document.createElement('img'); mimg.src = images[0]; mimg.loading = 'lazy'; mimg.addEventListener('click', ()=> openModal(mimg));
        main.appendChild(mimg);

        // start auto-advance
        clearInterval(foodSlideTimer);
        foodSlideTimer = setInterval(()=> plusFoodSlides(1),4500);
    }

    function showFoodSlides(){
        const thumbs = document.querySelectorAll('#crownThumbs img');
        const mainImg = document.querySelector('#crownMain img');
        if(!thumbs.length || !mainImg) return;
        if(foodSlideIndex >= thumbs.length) foodSlideIndex = 0;
        if(foodSlideIndex < 0) foodSlideIndex = thumbs.length -1;
        mainImg.src = thumbs[foodSlideIndex].src;
        thumbs.forEach(t=>t.classList.remove('active-thumb'));
        thumbs[foodSlideIndex].classList.add('active-thumb');
    }
    function plusFoodSlides(step){ foodSlideIndex += step; showFoodSlides(); resetFoodTimer(); }
    function resetFoodTimer(){ clearInterval(foodSlideTimer); foodSlideTimer = setInterval(()=> plusFoodSlides(1),4500); }
    function setCrown(i){ foodSlideIndex = i; showFoodSlides(); resetFoodTimer(); }

    // Middle grid
    function buildMidGrid(images){
        const mid = document.getElementById('midGrid'); if(!mid) return;
        images.forEach(src => {
            const card = document.createElement('div'); card.className = 'gallery-card';
            const img = document.createElement('img'); img.src = src; img.loading = 'lazy'; img.dataset.caption = '';
            img.style.cursor = 'zoom-in'; img.addEventListener('click', ()=> openModal(img));
            // don't append name captions â€” show images only
            card.appendChild(img); mid.appendChild(card);
        });
    }

    // Bottom alternate slideshow (thumbnails + main image)
    let altIndex = 0, altTimer;
    function buildAlt(images){
        const main = document.getElementById('altMain'); const thumbs = document.getElementById('altThumbs');
        if(!main || !thumbs) return;
        main.innerHTML = '';
        thumbs.innerHTML = '';
        if(!images.length) return;
        const mimg = document.createElement('img'); mimg.src = images[0]; mimg.loading = 'lazy'; mimg.addEventListener('click', ()=> openModal(mimg));
        main.appendChild(mimg);
        images.forEach((src,i)=>{
            const t = document.createElement('img'); t.src = src; t.loading = 'lazy';
            t.addEventListener('click', ()=> setAlt(i));
            if(i===0) t.classList.add('active-thumb');
            thumbs.appendChild(t);
        });
        clearInterval(altTimer);
        altTimer = setInterval(()=>{ altIndex = (altIndex+1) % images.length; setAlt(altIndex); }, 5200);
    }
    function setAlt(i){ const thumbs = document.querySelectorAll('#altThumbs img'); const mainImg = document.querySelector('#altMain img'); if(!mainImg) return; mainImg.src = thumbs[i].src; thumbs.forEach(t=>t.classList.remove('active-thumb')); thumbs[i].classList.add('active-thumb'); altIndex = i; }

    // Modal preview
    function openModal(img){
        const modal = document.getElementById('galleryModal');
        const modalImg = document.getElementById('modalImg');
        const modalCaption = document.getElementById('modalCaption');
        modal.style.display = 'block';
        modalImg.src = img.src;
        modalCaption.textContent = img.dataset.caption || img.alt || '';
    }
    function closeModal(){ const modal = document.getElementById('galleryModal'); const modalImg = document.getElementById('modalImg'); modal.style.display = 'none'; modalImg.src = ''; }

    // Utility: filter image list to only those that successfully load
    function filterExistingImages(list, cb){
        const checks = list.map(src => new Promise(resolve => {
            const img = new Image();
            img.onload = () => resolve(src);
            img.onerror = () => resolve(null);
            img.src = src;
        }));
        Promise.all(checks).then(results => cb(results.filter(Boolean)));
    }

    document.addEventListener('DOMContentLoaded', function(){
        // Filter images first to avoid broken placeholders
        filterExistingImages(allImgs, function(validImgs){
            if(!validImgs || !validImgs.length) return;
            // build unified slideshow using only existing images
            buildFeatured(validImgs);
            showFoodSlides();
            resetFoodTimer();
            // Optionally build other sections if present
            const mid = document.getElementById('midGrid'); if(mid) buildMidGrid(validImgs);
            const altMain = document.getElementById('altMain'); const altThumbs = document.getElementById('altThumbs'); if(altMain && altThumbs) buildAlt(validImgs);
        });

        // attach modal handlers
        document.querySelector('.modal-close').addEventListener('click', closeModal);
        document.getElementById('galleryModal').addEventListener('click', function(e){ if (e.target === this) closeModal(); });
        document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeModal(); });
    });
    </script>
</body>
</html>
